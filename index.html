<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=no, width=device-width">
    <title>Slot Machine coconuts</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 0;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            background: #e0ddddde;
            overflow: hidden; /* Убираем прокрутку */
            user-select: none; /* Отключаем выделение текста и объектов */
        }
        .container228 {
    position: fixed;
    bottom: 2%;
    left: 0;
    width: 98%;
    display: flex;
    justify-content: space-evenly;
    align-items: center;
    height: 90px;
    border: 5px solid transparent;
    background: rgba(10, 7, 7, 0.5);
    backdrop-filter: blur(10px);
    background-clip: padding-box, border-box;
    border-radius: 35px;
    margin: 0;
    outline: none;
    -webkit-tap-highlight-color: transparent;
}

.button228 {
    background-color: transparent;
    border-radius: 5px;
    height: var(--button-height);
    cursor: pointer;
    margin: 0 5px;
    flex-direction: column;
    display: flex;
    align-items: center;
    text-align: center;
    transition: brightness 0.2s;
}

.button228 img {
    width: 50px;
    height: 50px;
    border-radius: 5px;
    transition: transform 0.2s;
    border-radius: 10px;
    outline: none;
    -webkit-tap-highlight-color: transparent;
}

.button228:hover img {
    transform: scale(1.1);
}

.button228-text {
    margin-top: 2px;
    font-size: 15px;
    color: rgb(0, 0, 0);
}

.mini-buttons {
    display: none;
    flex-direction: row;
    margin-bottom: 1px;
}

.mini-button {
    background-color: #59a9c2;
    border: none;
    border-radius: 5px;
    padding: 2px 5px;
    margin: 0 2px;
    cursor: pointer;
    color: white;
    transition: filter 0.2s;
    height: auto;
}
        .ticket-display {
            position: absolute;
            top: 10px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            align-items: center;
        }

        .ticket-display img {
            width: 70px;
            height: auto;
            margin-right: 10px;
        }

        .ticket-display span {
            font-size: 50px;
            font-weight: bold;
        }

        .background-image {
    position: absolute;
    top: 50%; /* Центрируем по вертикали */
    left: 0; /* Привязываем к левой стороне экрана */
    transform: translateY(-50%); /* Центруем по вертикали относительно своего центра */
    width: 670px;
    height: 670px;
    background: url('magicticket.png') no-repeat center;
    background-size: contain; /* Масштабируем изображение, сохраняя пропорции */
    opacity: 0.5; /* Устанавливаем прозрачность на 50% */
}


        .slot-machine {
            width: 60%;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            gap: 20px;
            position: relative; /* Для правильного отображения на фоне */
        }

        .slots {
            display: flex;
            justify-content: center;
            gap: 10px;
        }

        .slot {
            width: 100px;
            height: 100px;
            display: flex;
            align-items: center;
            justify-content: center;
            border-radius: 10px;
            background: white; /* Сделали фон прозрачным */
            overflow: hidden;
            position: relative;
        }

        .slot img {
            width: 70px; 
            height: auto;
            opacity: 0;
            animation: fadeIn 0.5s ease-in-out forwards;
        }

        @keyframes fadeIn {
            0% {
                transform: scale(0.5);
                opacity: 0;
            }
            100% {
                transform: scale(1);
                opacity: 1;
            }
        }

        #spin-button {
            position: absolute;
            bottom: 120%;
            left: 20px;
            right: 20px;
            padding: 15px;
            font-size: 18px;

            color: #333;
            background: #ffcc00;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            transition: background 0.3s;
            font-weight: bold;
            text-transform: uppercase;
        }

        #spin-button:disabled {
            background: #999;
            cursor: not-allowed;
        }

        #spin-button:hover:not(:disabled) {
            background: #e6b800;
        }
    </style>
</head>
<body>

<div class="ticket-display">
    <img src="ticket.png" alt="Ticket Icon">
    <span id="ticket-counter">1000</span>
</div>

<div class="background-image"></div>

<div class="slot-machine">
    <div class="slots">
        <div class="slot" id="slot1"></div>
        <div class="slot" id="slot2"></div>
        <div class="slot" id="slot3"></div>
    </div>
</div>
<div class="container228">
    <div class="button228" onclick="toggleMiniButtons(this)">
      <img src="cocos.png" alt="Меню" draggable="false">
      <div class="button228-text">Кокос</div>
    </div>
    <div class="button228" onclick="toggleMiniButtons(this)">
      <img src="podarok.png" alt="Подарки дня" id="dailyGift" onclick="getDailyGift()" draggable="false">
      <div class="button228-text">Подарки</div>
    </div>
    <div class="button228" onclick="toggleMiniButtons(this)">
      <img src="magaz.png" alt="ПРОкачка" draggable="false">
      <div class="button228-text">Магазин</div>
      <div class="mini-buttons">
        <button class="mini-button" id="prokachka">ПРОкачка</button>
        <button class="mini-button" id="shopButton1">Скины</button>
      </div>
    </div>
    <div class="button228" onclick="toggleMiniButtons(this)">
      <img src="kvest.png" alt="Задания" id="taskButton" draggable="false">
      <div class="button228-text">Квесты</div>
    </div>
    <div class="button228" onclick="toggleMiniButtons(this)">
      <img src="inven.png" alt="Инвентарь" draggable="false">
      <div class="button228-text">Рюкзак</div>
      <div class="mini-buttons">
        <button class="mini-button" onclick="toggleInventory()">Предметы</button>
        <button class="mini-button" id="inventoryButton1">Скины</button>
      </div>
    </div>
<button id="spin-button">Spin</button>

<script>
    const images = [
        'skin1.png',
        'skin2.png',
        'skin3.png',
        'skin4.png',
        'skin5.png',
        'skin6.png',
        'skin7.png',
        'skin11.png',
        'skin9.png',
        'skin10.png'
    ];

    let tickets = 1000;

    const ticketCounter = document.getElementById('ticket-counter');
    const slots = [
        document.getElementById('slot1'),
        document.getElementById('slot2'),
        document.getElementById('slot3')
    ];
    const spinButton = document.getElementById('spin-button');

    function updateTickets(amount) {
        tickets += amount;
        ticketCounter.textContent = tickets;
    }

    function animateSlot(slot, finalImage) {
        return new Promise(resolve => {
            let count = 0;
            const maxCycles = 10; // Total animation cycles
            const interval = setInterval(() => {
                const randomImage = images[Math.floor(Math.random() * images.length)];
                slot.innerHTML = `<img src="${randomImage}" alt="">`;
                count++;
                if (count === maxCycles) {
                    clearInterval(interval);
                    setTimeout(() => {
                        slot.innerHTML = `<img src="${finalImage}" alt="">`;
                        resolve();
                    }, 200);
                }
            }, 100 + (maxCycles - count) * 10); // Speed up over time
        });
    }

    async function spinSlots() {
        if (tickets < 100) {
            alert('Not enough tickets to spin!');
            return;
        }

        spinButton.disabled = true;
        spinButton.textContent = 'Wait';

        updateTickets(-100);

        const results = slots.map(() => images[Math.floor(Math.random() * images.length)]);

        await Promise.all(slots.map((slot, index) => animateSlot(slot, results[index])));

        const reward = calculateReward(results);
        updateTickets(reward);

        spinButton.disabled = false;
        spinButton.textContent = 'Spin';
    }

    function calculateReward(results) {
        const counts = results.reduce((acc, item) => {
            acc[item] = (acc[item] || 0) + 1;
            return acc;
        }, {});

        const keys = Object.keys(counts);
        const values = Object.values(counts);

        // Rewards based on counts
        if (values.includes(3)) {
            return 1000; // All 3 are the same
        } else if (values.includes(2)) {
            return 500; // 2 are the same
        }
        return 0; // No reward
    }

    spinButton.addEventListener('click', spinSlots);
</script>

</body>
</html>
